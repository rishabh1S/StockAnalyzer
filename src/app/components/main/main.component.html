<main class="background-color pt-16 sm:pt-20">
    <header class=" inset-x-0 top-0">
        <nav [ngClass]="{'drop-shadow-md': shouldApplyDropShadow}"
            class="bg-white fixed w-full z-20 top-0 left-0 border-b border-gray-200" aria-label="Global">
            <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-1">
                <a href="#" class="flex-none items-center mx-4">
                    <svg width="100" height="60" viewBox="0 0 369.89473684210526 206.53620445271827">
                        <defs>
                            <linearGradient id="SvgjsLinearGradient1043">
                                <stop id="SvgjsStop1044" stop-color="#2B4BDA" offset="0" />
                                <stop id="SvgjsStop1045" stop-color="#9333EA" offset="1" />
                            </linearGradient>
                        </defs>
                        <g featurekey="monogramFeature-0"
                            transform="matrix(4.927971365791381,0,0,4.927971365791381,-7.391463582316099,-89.12700092221144)"
                            fill="url(#SvgjsLinearGradient1043)">
                            <path
                                d="M12.236 49.61 c0 1.3413 -1.0929 2.4342 -2.4342 2.4342 l-8.3017 0 l0 -1.2971 l8.3017 0 c0.62376 0 1.1371 -0.50783 1.1371 -1.1371 l0 -31.524 l1.2971 0 l0 31.524 z M14.223 49.483000000000004 c0 2.5281 -2.0534 4.5869 -4.5814 4.5814 l-8.1417 0 l0 -1.2971 l8.1417 0 c1.8105 0 3.2843 -1.4738 3.2843 -3.2843 l0 -31.397 l1.2971 0 l0 31.397 z M16.216 50.0904 c0 3.2677 -2.6606 5.9282 -5.9283 5.9282 l-8.7875 0 l0 -1.2971 l8.7875 0 c2.5557 0 4.6312 -2.081 4.6312 -4.6311 l0 -32.004 l1.2971 0 l0 32.004 z M18.203 50.4324 c0 4.1509 -3.3781 7.5288 -7.5288 7.5288 l-9.1684 0 l0 -1.2971 l9.1684 0 c3.4333 0 6.2316 -2.793 6.2316 -6.2316 l0 -32.346 l1.2971 0 l0 32.346 z M18.893 18.086 l1.2972 -0.000058594 l0 32.776 c0 5.0396 -4.0957 9.135 -9.135 9.135 l-9.5492 0 l0 -1.2971 l9.5492 0 c4.322 0 7.8378 -3.5161 7.8378 -7.8378 l0 -32.776 z" />
                        </g>
                        <g featurekey="nameFeature-0"
                            transform="matrix(2.1624196066567634,0,0,2.1624196066567634,106.59377569261468,49.375803933432366)"
                            fill="#000">
                            <path
                                d="M16.211 19.922 l5.625 0 l0 20.078 l-5.332 0 l-0.13672 -2.4219 c-1.4063 1.7773 -3.6328 2.8125 -6.3867 2.8125 c-4.8242 0 -7.4805 -2.5195 -7.4805 -6.9531 l0 -13.516 l5.6445 0 l0 12.305 c0 2.6563 1.6602 3.6328 3.6133 3.6328 c2.3242 0 4.4336 -1.1719 4.4531 -4.8633 l0 -11.074 z M34.8873515625 40.39063 c-6.0547 0 -10.781 -2.9102 -11.641 -8.2031 l6.0547 -1.3867 c0.39063 3.1641 2.7148 4.8047 5.8203 4.8047 c2.3828 0 4.2773 -1.0547 4.2578 -3.4375 c-0.019531 -2.6563 -3.1445 -3.4961 -6.582 -4.5508 c-4.1406 -1.2891 -8.5742 -2.8125 -8.5742 -8.0078 c0 -5.2539 4.2969 -8.2227 9.9609 -8.2227 c4.9609 0 9.9609 2.0117 11.094 7.4219 l-5.6641 1.4063 c-0.52734 -2.8125 -2.4219 -4.043 -5.0781 -4.043 c-2.3633 0 -4.375 0.97656 -4.375 3.3008 c0 2.168 2.7734 2.8906 5.9766 3.8477 c4.2578 1.2891 9.2969 2.9297 9.2969 8.5547 c0 5.9961 -5.0195 8.5156 -10.547 8.5156 z M54.697640625 40 c-3.9063 0 -6.1328 -2.2656 -6.1328 -6.2695 l0 -9.4922 l-3.9453 0 l0 -4.3164 l1.2695 0 c2.1289 0 3.3008 -0.82031 3.3008 -3.8281 l0 -2.6563 l5.0781 0 l0 6.4844 l4.1406 0 l0 4.3164 l-4.1406 0 l0 8.8867 c0 1.7969 0.87891 2.5977 2.3242 2.5977 l1.8164 0 l0 4.2773 l-3.7109 0 z M69.2337734375 40.39063 c-6.3867 0 -10.996 -3.8867 -10.996 -10.449 c0 -6.5234 4.5703 -10.41 10.996 -10.41 c6.4648 0 11.016 3.8867 11.016 10.41 c0 6.5625 -4.5703 10.449 -11.016 10.449 z M69.1747734375 35.918 c3.2617 0 5.4883 -2.3828 5.4883 -5.9766 s-2.2266 -5.9766 -5.4883 -5.9766 c-3.1445 0 -5.3516 2.3828 -5.3516 5.9766 s2.207 5.9766 5.3516 5.9766 z M90.6248125 40.37109 c-6.3086 0 -10.762 -4.1992 -10.762 -10.43 c0 -6.25 4.4531 -10.41 10.762 -10.41 c5.0781 0 8.8867 2.6367 9.8633 7.3828 l-5.1953 0.56641 c-0.625 -2.4023 -2.3633 -3.5156 -4.7266 -3.5156 c-3.0273 0 -5.0781 2.3828 -5.0781 5.9766 c0 3.5742 2.0508 5.9766 5.0781 5.9766 c2.3633 0 4.1016 -1.1328 4.7266 -3.5156 l5.1953 0.56641 c-0.97656 4.7461 -4.8828 7.4023 -9.8633 7.4023 z M114.9262890625 40 l-6.4648 -8.4375 l-1.1719 0 l0 8.4375 l-5.6836 0 l0 -30 l5.6836 0 l0 17.656 l1.0547 0 l6.3086 -7.7344 l6.3672 0 l-7.9102 9.3164 l8.6523 10.762 l-6.8359 0 z" />
                        </g>
                    </svg>
                </a>
                <div class="hidden md:block relative flex-grow w-full md:w-auto md:mx-20 lg:mx-60 items-center"
                    (click)="toggleDropdown()">
                    <div class="absolute left-0 top-0 mt-3 mx-3 ">
                        <svg class="w-5 h-5 text-gray-500 flex items-center" aria-hidden="true" fill="currentColor"
                            viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                clip-rule="evenodd"></path>
                        </svg>
                        <span class="sr-only">Search icon</span>
                    </div>
                    <form (submit)="searchStocks($event)">
                        <input #searchInput type="text" autocomplete="off" (focus)="toggleDropdown()"
                            class="border-none block w-full p-3 pl-10 text-sm text-gray-900 rounded-lg bg-gray-100 focus:bg-gray-50 focus:shadow-md focus:ring-0"
                            name="stockSearch" [formControl]="searchKeywords" placeholder="Search for stocks...">
                    </form>
                    <ul *ngIf="isDropdownOpen && searchResults"
                        class="dropdown absolute z-10 w-full mt-2 bg-white rounded shadow-md max-h-60 overflow-y-auto">
                        <li *ngFor="let result of searchResults; let i = index" [class.selected]="i === selectedIndex"
                            class="py-1 px-4 cursor-pointer hover:bg-blue-100 border-b border-gray-300"
                            (click)="selectResult(result['1. symbol'], selectedInterval); closeDropdown()">
                            <span class="text-base text-gray-700">{{ result['2. name'] }}</span>
                            <br>
                            <span class="font-medium text-xs text-gray-800">{{ result['1. symbol'] }} : </span>
                            <span class="text-gray-700 text-xs">{{ result['8. currency'] }} </span>
                            <span class="text-gray-500 text-xs">({{ result['4. region'] }})</span>
                        </li>
                    </ul>
                </div>
                <div class="flex justify-end items-center mx-4">
                    <div class="relative inline-flex items-center">
                        <div class="md:hidden flex items-center justify-center p-2 rounded-full hover:bg-gray-100">
                            <button type="button" class="flex" aria-controls="mobile-menu" aria-expanded="false"
                                (click)="toggleSearchIcon()">
                                <svg class="w-5 h-5 text-gray-500" aria-hidden="true" fill="currentColor"
                                    viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                        clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                        <div class="ml-4">
                            <button type="button" class="flex items-center justify-center gap-x-1.5 rounded-md bg-white"
                                id="profile-button" (click)="toggleProfileDropdown()">

                                <div class="relative w-8 h-8 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600">
                                    <svg class="absolute w-10 h-10 text-gray-400 -left-1" fill="currentColor"
                                        viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd"
                                            d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd">
                                        </path>
                                    </svg>
                                </div>

                            </button>
                            <div class="absolute right-0 z-10 mt-2 w-56 origin-top-right bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none divide-y divide-gray-200 rounded-lg"
                                role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"
                                [class.hidden]="!isProfileDropdownOpen">
                                <div class="px-4 py-3 text-sm text-gray-900 dark:text-white">
                                    <div>Andrew Garfield</div>
                                    <div class="font-medium truncate">spidyandrew@gmail.com</div>
                                </div>
                                <ul>
                                    <li><a class="text-gray-700 block px-4 py-2 text-sm hover:cursor-pointer hover:bg-gray-100"
                                            tabindex="-1" id="menu-item-1" (click)="switchAccount()">Switch
                                            Account</a></li>
                                    <li><a href="#support"
                                            class="text-gray-700 block px-4 py-2 text-sm hover:cursor-pointer hover:bg-gray-100"
                                            tabindex="-1" id="menu-item-3">Help and Support</a></li>
                                </ul>
                                <div class="py-1">
                                    <a class="text-gray-700 block px-4 py-2 text-sm hover:cursor-pointer hover:bg-gray-100"
                                        tabindex="-1" id="menu-item-4" (click)="logout()">Sign out</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div *ngIf="isSearchBarOpen" class="lg:hidden" role="dialog" aria-modal="true">
                    <div
                        class="fixed inset-y-0 right-0 z-50 w-full overflow-y-auto bg-white px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10">
                        <div class="flex items-center justify-between">
                            <div class="relative flex-grow w-full md:w-auto md:mx-20 lg:mx-60 items-center"
                                (click)="toggleDropdown()">
                                <div class="absolute left-0 top-0 mt-3 mx-3">
                                    <svg class="w-5 h-5 text-gray-500 flex items-center" aria-hidden="true"
                                        fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd"
                                            d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                            clip-rule="evenodd"></path>
                                    </svg>
                                    <span class="sr-only">Search icon</span>
                                </div>
                                <form (submit)="searchStocks($event)" class="flex">
                                    <input #searchInput type="text" autocomplete="off" (input)="toggleDropdown()"
                                        class="border-none block w-full p-3 pl-10 text-sm text-gray-900 rounded-lg bg-gray-100 focus:bg-gray-50 focus:shadow-md focus:ring-0"
                                        name="stockSearch" [formControl]="searchKeywords"
                                        placeholder="Search for stocks...">
                                    <button class="absolute right-0 top-0 mt-3 mx-3 flex items-center"
                                        (click)="toggleSearchIcon(); clearSearch()">
                                        <span class="sr-only">Close Search Menu</span>
                                        <svg class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24"
                                            stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M6 18L18 6M6 6l12 12" />
                                        </svg>
                                    </button>
                                </form>
                                <ul *ngIf="isDropdownOpen && searchResults" class="dropdown z-10 w-full mt-2">
                                    <li *ngFor="let result of searchResults; let i = index"
                                        [class.selected]="i === selectedIndex"
                                        class="py-1 px-4 cursor-pointer hover:bg-blue-100 border-b border-gray-300"
                                        (click)="selectResult(result['1. symbol'], selectedInterval); closeDropdown(); toggleSearchIcon()">
                                        <span class="text-base text-gray-700">{{ result['2. name'] }}</span>
                                        <br>
                                        <span class="font-medium text-xs text-gray-800">{{ result['1. symbol'] }} :
                                        </span>
                                        <span class="text-gray-700 text-xs">{{ result['8. currency'] }} </span>
                                        <span class="text-gray-500 text-xs">({{ result['4. region'] }})</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <div
        class="text-gray-100 relative min-h-screen grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 grid-rows-8 md:grid-rows-7 xl:grid-rows-5 auto-rows-fr gap-2 pt-5 px-5 sm:px-10">
        <div class=" md:col-span-2 row-span-4">
            <div class="w-full h-full rounded-md relative p-4 border-2 bg-gray-900 border-gray-800">
                <div class="flex items-center justify-center">
                    <div *ngIf="stockQuote" class="px-2 py-1 leading-none text-2xl sm:text-3xl font-bold text-white">
                        {{getCurrencySymbol(selectedStockCurrency)}}{{(+stockQuote['05. price']).toFixed(2)}}
                    </div>
                    <div class="flex sm:flex-grow sm:space-x-3 items-center justify-center">
                        <span (click)="selectResult(selectedSymbol, '1min')"
                            class="px-1 sm:px-3 py-2 cursor-pointer relative {{selectedInterval === '1min' ? 'text-blue-600' : 'text-gray-400'}}">
                            1D
                            <span
                                class="absolute left-0 bottom-0 w-full h-0.5 bg-blue-600 transition-all duration-200 ease-in-out transform origin-left scale-x-0 {{selectedInterval === '1min' ? 'scale-x-100' : 'scale-x-0'}}"></span>
                        </span>
                        <span (click)="selectResult(selectedSymbol, '30min')"
                            class="px-1 sm:px-3 py-2 cursor-pointer relative {{selectedInterval === '30min' ? 'text-blue-600' : 'text-gray-400'}}">
                            5D
                            <span
                                class="absolute left-0 bottom-0 w-full h-0.5 bg-blue-600 transition-all duration-200 ease-in-out transform origin-left scale-x-0 {{selectedInterval === '30min' ? 'scale-x-100' : 'scale-x-0'}}"></span>
                        </span>
                        <span (click)="selectResult(selectedSymbol, 'Daily')"
                            class="px-1 sm:px-3 py-2 cursor-pointer relative {{selectedInterval === 'Daily' ? 'text-blue-600' : 'text-gray-400'}}">
                            1M
                            <span
                                class="absolute left-0 bottom-0 w-full h-0.5 bg-blue-600 transition-all duration-200 ease-in-out transform origin-left scale-x-0 {{selectedInterval === 'Daily' ? 'scale-x-100' : 'scale-x-0'}}"></span>
                        </span>
                        <span (click)="selectResult(selectedSymbol, 'Weekly')"
                            class="px-1 sm:px-3 py-2 cursor-pointer relative {{selectedInterval === 'Weekly' ? 'text-blue-600' : 'text-gray-400'}}">
                            1Y
                            <span
                                class="absolute left-0 bottom-0 w-full h-0.5 bg-blue-600 transition-all duration-200 ease-in-out transform origin-left scale-x-0 {{selectedInterval === 'Weekly' ? 'scale-x-100' : 'scale-x-0'}}"></span>
                        </span>
                        <span (click)="selectResult(selectedSymbol, 'Monthly')"
                            class="px-1 sm:px-3 py-2 cursor-pointer relative {{selectedInterval === 'Monthly' ? 'text-blue-600' : 'text-gray-400'}}">
                            5Y
                            <span
                                class="absolute left-0 bottom-0 w-full h-0.5 bg-blue-600 transition-all duration-200 ease-in-out transform origin-left scale-x-0 {{selectedInterval === 'Monthly' ? 'scale-x-100' : 'scale-x-0'}}"></span>
                        </span>
                    </div>
                    <div *ngIf="stockQuote"
                        class="flex items-center px-2 py-1 text-base sm:text-lg font-semibold text-center"
                        [ngClass]="{ 'text-red-500': stockQuote['09. change'] < 0, 'text-green-500': stockQuote['09. change'] >= 0 }">
                        <ng-container *ngIf="stockQuote['09. change'] < 0">▼</ng-container>
                        <ng-container *ngIf="stockQuote['09. change'] >= 0">▲</ng-container>
                        {{ (+stockQuote['09. change']).toFixed(3) }}
                        ({{ stockQuote['10. change percent'] }})
                    </div>
                </div>
                <div class="w-full h-95">
                    <div id="area-chart" class="w-full h-full"></div>
                </div>
            </div>
        </div>
        <div>
            <div
                class="w-full h-full rounded-md relative px-6 leading-tight border-2 bg-gray-900 border-gray-800 flex md:flex-col items-center sm:items-start justify-center">
                <h3 *ngIf="stockQuote" class="text-2xl sm:text-3xl font-bold text-white">
                    {{selectedStockName}}</h3>
                <h6 *ngIf="stockQuote" class="py-1 px-1 text-lg sm:text-xl text-gray-400 whitespace-nowrap">
                    <span class="block sm:inline-block">{{ selectedSymbol }}</span><span
                        class="hidden sm:inline">&nbsp;&nbsp;-&nbsp;&nbsp;</span>{{ lastRefreshedDate }}
                </h6>
            </div>
        </div>
        <div class="row-span-2 xl:row-span-3">
            <div
                class="w-full h-full rounded-md relative px-4 sm:px-8 border-2 text-gray-400 bg-gray-900 border-gray-800">
                <ul class="w-full h-full flex flex-col justify-between divide-y text-sm sm:text-lg sm:font-semibold">
                    <li class="flex-1 flex justify-between items-center">
                        <div class="">Open</div>
                        <div *ngIf="stockQuote" class="sm:px-3 text-right">
                            {{ (+stockQuote['02. open']).toFixed(3)}}
                        </div>
                    </li>
                    <li class="flex-1 flex justify-between items-center">
                        <div class="">Low</div>
                        <div *ngIf="stockQuote" class="sm:px-3 text-right">
                            {{ (+stockQuote['04. low']).toFixed(3)}}
                        </div>
                    </li>
                    <li class="flex-1 flex justify-between items-center">
                        <div class="">High</div>
                        <div *ngIf="stockQuote" class="sm:px-3 text-right">
                            {{ (+stockQuote['03. high']).toFixed(3)}}
                        </div>
                    </li>
                    <li class="flex-1 flex justify-between items-center">
                        <div class="">Previous Close</div>
                        <div *ngIf="stockQuote" class="sm:px-3 text-right">
                            {{ (+stockQuote['08. previous close']).toFixed(3)}}
                        </div>
                    </li>
                    <li class="flex-1 flex justify-between items-center">
                        <div class="">Volume</div>
                        <div *ngIf="stockQuote" class="sm:px-3 text-right">
                            {{ (+stockQuote['06. volume']).toFixed(3) }}
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="relative grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 pt-5 sm:px-10 py-6 px-8 gap-3">
        <div class="absolute left-0 top-1/2 transform -translate-y-1/2 flex items-center">
            <button (click)="prevSlide()" class="text-gray-400 hover:text-gray-600 focus:outline-none">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
        </div>
        <div *ngFor="let news of getDisplayedNews()" class="bg-gray-900 border rounded-lg shadow border-gray-700">
            <a [href]="news.url" target="_blank">
                <img class="rounded-t-lg h-48 w-full object-cover" [src]="news.banner_image" alt="{{ news.title }}" />
            </a>
            <div class="p-5">
                <a [href]="news.url" target="_blank">
                    <h5 class="mb-2 text-2xl font-bold tracking-tight text-white">{{ news.title }}
                    </h5>
                </a>
                <p class="mb-3 font-normal text-gray-400">{{ news.summary }}</p>
                <a [href]="news.url" target="_blank"
                    class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                    Read more
                    <svg class="w-3.5 h-3.5 ml-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 14 10">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M1 5h12m0 0L9 1m4 4L9 9" />
                    </svg>
                </a>
            </div>
        </div>
        <div class="absolute right-0 top-1/2 transform -translate-y-1/2 flex items-center">
            <button (click)="nextSlide()" class="text-gray-400 hover:text-gray-600 focus:outline-none">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>
    </div>
    <app-footer></app-footer>
</main>